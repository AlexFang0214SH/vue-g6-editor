# 缩略图与网格对齐

<cite>
**本文档引用文件**  
- [index.vue](file://src/views/index.vue)
- [g6-editor.md](file://doc/v1/g6-editor.md)
</cite>

## 目录
1. [缩略图功能](#缩略图功能)
2. [网格对齐功能](#网格对齐功能)
3. [对齐辅助功能协同](#对齐辅助功能协同)

## 缩略图功能

缩略图（Minimap）组件为用户提供画布的全局视图导航能力，帮助用户在复杂流程图中快速定位和导航。该组件通过嵌入右侧属性栏区域实现布局集成。

在实现上，Minimap组件通过指定`container`为`"minimap"`来绑定到页面中的对应DOM元素。其尺寸配置通过动态计算右侧属性栏容器的宽度来确定`minimapWidth`，并设置固定高度200px，确保与界面整体协调。具体初始化代码如下：

```javascript
let minimapWidth = getComputedStyle(document.querySelector(".right-part")).width;
minimapWidth = Number(minimapWidth.replace(/px$/, ""));
const minimap = new G6Editor.Minimap({
  container: "minimap",
  width: minimapWidth,
  height: 200
});
```

此设计确保了缩略图能够自适应界面布局变化，为用户提供一致的导航体验。

**Section sources**
- [index.vue](file://src/views/index.vue#L350-L360)

## 网格对齐功能

网格对齐功能提供双重控制机制，既支持初始化配置，也支持运行时动态开关。

在初始化阶段，通过`align.grid`和`grid.cell`配置项启用网格对齐功能。其中`align.grid`设置为`true`开启网格对齐，`grid.cell`设置为`18`定义网格单元尺寸。相关配置代码如下：

```javascript
align: {
  line: {
    stroke: "#FA8C16",
    lineWidth: 1
  },
  item: true,
  grid: true
},
grid: {
  cell: 18
}
```

在运行时控制方面，通过`canvasAttributeForm.grid`数据绑定到复选框组件，实现用户界面的动态开关控制。当用户操作复选框时，触发`toggleGridShowStatus`方法，该方法根据复选框状态调用`showGrid()`或`hideGrid()`方法控制网格显示：

```javascript
toggleGridShowStatus(value) {
  if (value) {
    this.editor.getCurrentPage().showGrid();
  } else {
    this.editor.getCurrentPage().hideGrid();
  }
}
```

网格对齐功能显著提升了节点布局的精度，使用户能够更精确地排列和对齐图形元素。

**Section sources**
- [index.vue](file://src/views/index.vue#L320-L330)
- [index.vue](file://src/views/index.vue#L167-L169)
- [index.vue](file://src/views/index.vue#L425-L430)

## 对齐辅助功能协同

网格对齐功能与对齐线（align.line）协同工作，形成完整的视觉辅助系统。对齐线配置定义了辅助对齐线的颜色和粗细，当前设置为橙色（`#FA8C16`）和1px粗细，提供了清晰的视觉反馈。

当用户移动节点时，系统同时激活网格对齐和对齐线功能。网格对齐确保节点按预设网格单元对齐，提升布局规整性；对齐线则在节点与其他元素对齐时显示辅助线，帮助用户精确对齐。这种双重辅助机制显著提升了用户体验和布局效率。

**Section sources**
- [index.vue](file://src/views/index.vue#L320-L325)
- [g6-editor.md](file://doc/v1/g6-editor.md#L487-L518)