# 画布配置

<cite>
**Referenced Files in This Document**  
- [index.vue](file://src/views/index.vue)
- [g6-editor.md](file://doc/v1/g6-editor.md)
</cite>

## Table of Contents
1. [画布配置概述](#画布配置概述)
2. [核心配置项详解](#核心配置项详解)
3. [配置项数据类型与默认值](#配置项数据类型与默认值)
4. [配置实现方式](#配置实现方式)
5. [用户交互行为影响](#用户交互行为影响)
6. [常见问题排查](#常见问题排查)
7. [配置初始化时机](#配置初始化时机)

## 画布配置概述

画布配置是G6 Editor中控制图形编辑器核心交互行为的关键设置。通过在`G6Editor.Flow`实例化时传入特定配置对象，可以精确控制画布的网格显示、对齐辅助线、多选模式和快捷键支持等功能。这些配置直接影响用户在画布上的操作体验，包括节点的对齐方式、元素的吸附行为以及操作的便捷性。

**Section sources**
- [index.vue](file://src/views/index.vue#L274-L370)
- [g6-editor.md](file://doc/v1/g6-editor.md#L487-L636)

## 核心配置项详解

### 网格显示（grid）

网格配置项控制画布上网格的显示与样式。该配置为对象类型，包含网孔尺寸和网格线样式等子配置。

**Section sources**
- [index.vue](file://src/views/index.vue#L347-L352)
- [g6-editor.md](file://doc/v1/g6-editor.md#L536-L545)

### 对齐辅助线（align）

对齐配置项控制元素间的对齐辅助线显示。包含辅助线样式、元素对齐方式和网格对齐开关等子配置。

**Section sources**
- [index.vue](file://src/views/index.vue#L320-L346)
- [g6-editor.md](file://doc/v1/g6-editor.md#L487-L518)

### 多选模式（multiSelect）

多选模式通过工具栏中的"多选"按钮（`data-command="multiSelect"`）实现，允许用户通过框选方式选择多个元素进行批量操作。

**Section sources**
- [index.vue](file://src/views/index.vue#L31)
- [g6-editor.md](file://doc/v1/g6-editor.md#L286-L319)

### 快捷键支持（keyboard）

快捷键配置控制命令的快捷键是否开启。对于自定义命令，需要在`shortcut`配置中显式开启才能使用快捷键。

**Section sources**
- [index.vue](file://src/views/index.vue#L353-L358)
- [g6-editor.md](file://doc/v1/g6-editor.md#L546-L551)

## 配置项数据类型与默认值

### 网格配置（grid）

| 配置项 | 数据类型 | 默认值 | 说明 |
|--------|--------|--------|------|
| cell | 数字类型 | 10 | 网孔尺寸，单位为像素 |
| line.stroke | 字符串类型 | "#ccc" | 网格线颜色 |
| line.lineWidth | 数字类型 | 1 | 网格线粗细 |

**Section sources**
- [g6-editor.md](file://doc/v1/g6-editor.md#L536-L545)

### 对齐配置（align）

| 配置项 | 数据类型 | 默认值 | 说明 |
|--------|--------|--------|------|
| item | 布尔类型/字符串类型 | true | 元素对齐方式开关 |
| grid | 布尔类型/字符串类型 | false | 网格对齐开关 |
| line.stroke | 字符串类型 | "#1890FF" | 对齐线颜色 |
| line.lineWidth | 数字类型 | 1 | 对齐线粗细 |

**Section sources**
- [g6-editor.md](file://doc/v1/g6-editor.md#L487-L518)

### 快捷键配置（shortcut）

| 配置项 | 数据类型 | 默认值 | 说明 |
|--------|--------|--------|------|
| 内置命令 | 布尔类型 | true | g6-editor内置命令默认开启 |
| 自定义命令 | 布尔类型 | false | 需要显式开启才能使用快捷键 |

**Section sources**
- [g6-editor.md](file://doc/v1/g6-editor.md#L546-L551)

## 配置实现方式

### 配置对象传入

在`index.vue`文件中，通过`align`、`grid`、`shortcut`等对象将配置传入`Flow`组件：

```javascript
const flow = new G6Editor.Flow({
  graph: {
    container: "page"
  },
  align: {
    line: {
      stroke: "#FA8C16",
      lineWidth: 1
    },
    item: true,
    grid: true
  },
  grid: {
    cell: 18
  },
  shortcut: {
    save: true
  }
});
```

**Section sources**
- [index.vue](file://src/views/index.vue#L320-L358)

### 属性栏控制

通过属性栏的复选框控件绑定`canvasAttributeForm.grid`，实现网格的动态开关：

```vue
<el-checkbox
  v-model="canvasAttributeForm.grid"
  @change="toggleGridShowStatus"
></el-checkbox>
```

**Section sources**
- [index.vue](file://src/views/index.vue#L150-L158)

### 运行时控制

通过`showGrid()`和`hideGrid()`方法在运行时控制网格显示状态：

```javascript
toggleGridShowStatus(value) {
  if (value) {
    this.editor.getCurrentPage().showGrid();
  } else {
    this.editor.getCurrentPage().hideGrid();
  }
}
```

**Section sources**
- [index.vue](file://src/views/index.vue#L425-L431)

## 用户交互行为影响

### 网格对齐效果

当开启`grid`配置后，节点在移动时会自动吸附到最近的网格点，确保元素排列整齐。网孔尺寸由`cell`值决定，较小的值提供更精细的控制，较大的值则适合快速布局。

**Section sources**
- [index.vue](file://src/views/index.vue#L347-L352)

### 对齐提示功能

当`align.item`启用后，在移动元素时，系统会显示对齐辅助线，提示当前元素与画布上其他元素的对齐关系（如左对齐、右对齐、居中对齐等），帮助用户创建视觉上一致的布局。

**Section sources**
- [index.vue](file://src/views/index.vue#L320-L346)

### 快捷键操作

通过`shortcut`配置启用的快捷键可以显著提高操作效率。例如，配置`save: true`后，用户可以使用Ctrl+S（或Cmd+S）快速保存当前画布状态。

**Section sources**
- [index.vue](file://src/views/index.vue#L274-L324)

## 常见问题排查

### 配置不生效

**问题现象**：配置项已设置但功能未启用。

**解决方案**：
1. 确认配置是在`G6Editor.Flow`实例化时传入，而非运行时动态修改
2. 检查配置项名称是否正确，如`align`而非`alignment`
3. 确认数据类型匹配，如`grid`应为布尔值而非字符串

**Section sources**
- [index.vue](file://src/views/index.vue#L274-L370)

### 画布无法响应操作

**问题现象**：画布无响应或部分功能失效。

**解决方案**：
1. 检查`container`配置是否正确指向画布容器ID
2. 确认`G6Editor`实例已正确初始化
3. 验证浏览器控制台是否有JavaScript错误

**Section sources**
- [index.vue](file://src/views/index.vue#L320-L370)

## 配置初始化时机

所有画布级别的配置必须在`G6Editor.Flow`实例化时作为参数传入。运行时动态修改配置可能导致异常行为或配置不生效。正确的做法是在初始化函数中一次性设置所有配置：

```javascript
initG6Editor() {
  const editor = new G6Editor();
  const flow = new G6Editor.Flow({
    // 所有配置在此处一次性设置
    align: { /* 对齐配置 */ },
    grid: { /* 网格配置 */ },
    shortcut: { /* 快捷键配置 */ }
  });
  // ...
}
```

**Section sources**
- [index.vue](file://src/views/index.vue#L274-L370)